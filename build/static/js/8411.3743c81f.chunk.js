"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[8411],{8411:(e,r,s)=>{s.r(r),s.d(r,{default:()=>m});var d=s(9950),a=s(899),t=s(8089),n=s(5180),i=s(4745),l=s(9246),o=s(1671),c=s(4428),p=s(4414);function u(e){const[r,s]=(0,d.useState)([]),[u,m]=(0,d.useState)([]),g=c.A.filter((e=>!e.canBeAssigned)).map((e=>e.name)),h=c.A.map((e=>e.name)).filter((e=>!g.includes(e)));(0,d.useEffect)((()=>{!async function(){if(e.selectedUser)try{var r;const d=await(0,l.A)(`https://sameer-yadav.online/api/get-user-modules/${e.selectedUser}`,{withCredentials:!0});m(null===(r=d.data.modules)||void 0===r?void 0:r.sort()),s(h.sort().filter((e=>{var r;return!(null!==(r=d.data.modules)&&void 0!==r&&r.includes(e))})))}catch(d){console.error("Error occurred while fetching user modules:",d)}else s([]),m([])}()}),[e.selectedUser]);const f=(e,r,s)=>(0,p.jsxs)(t.A,{style:{maxHeight:"80vh"},children:[(0,p.jsx)(n.A,{sx:{px:2},title:e,subheader:`${r.length} modules`}),(0,p.jsx)(i.A,{}),(0,p.jsx)(o.gL,{droppableId:s,children:e=>(0,p.jsxs)("div",{ref:e.innerRef,...e.droppableProps,style:{minHeight:600,maxHeight:600,width:400,padding:10,overflowY:"auto"},children:[r.map(((e,r)=>(0,p.jsx)(o.sx,{draggableId:e,index:r,children:(r,s)=>(0,p.jsx)("div",{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,style:{...r.draggableProps.style,padding:10,marginBottom:"12px",backgroundColor:s.isDragging?"#D2E0FB":"white",boxShadow:"2px 2px 50px 10px rgba(0, 0, 0, 0.05)",borderRadius:4},children:e})},e))),e.placeholder]})})]});return(0,p.jsx)(o.JY,{onDragEnd:async d=>{const{source:a,destination:t}=d;if(!t)return;const n="left"===a.droppableId?r:u,i="left"===t.droppableId?r:u,o="left"===a.droppableId?s:m,c="left"===t.droppableId?s:m;if(a.droppableId===t.droppableId){const e=Array.from(n),[r]=e.splice(a.index,1);e.splice(t.index,0,r),o(e)}else{const r=Array.from(n),s=Array.from(i),[d]=r.splice(a.index,1);s.splice(t.index,0,d),o(r),c(s);const u="right"===t.droppableId?"https://sameer-yadav.online/api/assign-modules":"https://sameer-yadav.online/api/unassign-modules";try{await l.A.put(u,{modules:[d],username:e.selectedUser},{withCredentials:!0})}catch(p){console.error("right"===t.droppableId?"Error occurred during module assignment:":"Error occurred during module unassignment:",p)}}},children:(0,p.jsxs)(a.Ay,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,p.jsx)(a.Ay,{item:!0,children:f("Available Modules",r,"left")}),(0,p.jsx)(a.Ay,{item:!0,children:f("Assigned Modules",u,"right")})]})})}const m=d.memo(u)}}]);