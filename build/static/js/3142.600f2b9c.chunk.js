"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[3142],{3142:(e,s,r)=>{r.r(s),r.d(s,{default:()=>y});var l=r(9950),i=r(3939),o=r(6781),a=r(8459),n=r(9246),t=r(2436),d=r(8785),u=r(7256),c=r(9714);const m=c.Ik({skill:c.Yj().required("This field is required"),company_policy_visited:c.Yj().required("This field is required"),introduction_with_md:c.Yj().required("This field is required"),employee_photo:c.Yj().required("This field is required"),resume:c.Yj().required("This field is required"),address_proof:c.Yj().required("This field is required")});var p=r(4414);const h=(0,l.lazy)((()=>r.e(3557).then(r.bind(r,3557)))),f=(0,l.lazy)((()=>r.e(3788).then(r.bind(r,1407)))),j=(0,l.lazy)((()=>r.e(6888).then(r.bind(r,6888))));function x(){const{user:e}=(0,l.useContext)(t.R),[s,r]=(0,l.useState)(!1),c=(0,l.useRef)({employeePhoto:null,resume:null,addressProof:null}),x=(0,i.Wx)({initialValues:{skill:"",company_policy_visited:"",introduction_with_md:"",employee_photo:"",resume:"",address_proof:""},validationSchema:m,onSubmit:async(s,r)=>{let{resetForm:l}=r;try{const r=await n.A.post("https://sameer-yadav.online/api/complete-onboarding",{...s,username:e.username},{withCredentials:!0});alert(r.data.message),l()}catch(i){console.error("Error occurred while completing onboarding:",i)}}}),y=[e.first_name,e.middle_name,e.last_name].filter(Boolean).join(" ");return(0,p.jsxs)("form",{onSubmit:x.handleSubmit,children:["Name:\xa0",y,(0,p.jsx)("br",{}),"Email:\xa0",e.email,(0,p.jsx)("br",{}),"Employment Type:\xa0",e.employment_type,(0,p.jsx)("br",{}),(0,p.jsxs)(o.default,{children:[(0,p.jsx)(a.default,{xs:4,children:(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Skill field..."}),children:(0,p.jsx)(j,{id:"skill",name:"skill",label:"Skill",formik:x})})}),(0,p.jsx)(a.default,{xs:4,children:(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Company Policy field..."}),children:(0,p.jsx)(j,{id:"company_policy_visited",name:"company_policy_visited",label:"Gone through company policy?",formik:x,select:!0,options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]})})})]}),(0,p.jsx)("br",{}),(0,p.jsxs)(o.default,{children:[(0,p.jsxs)(a.default,{children:[(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Upload Button..."}),children:(0,p.jsx)(f,{name:"Employee Photo",onChange:e=>{(0,u.i)(e,"employee_photo","kyc",x,r,!1)},ref:e=>c.current.employeePhoto=e})}),(0,p.jsx)("br",{}),""!==x.values.employee_photo?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("a",{href:x.values.employee_photo,children:x.values.employee_photo})]}):""]}),(0,p.jsxs)(a.default,{children:[(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Upload Button..."}),children:(0,p.jsx)(f,{name:"Resume",onChange:e=>(0,u.i)(e,"resume","kyc",x,r,!1),ref:e=>c.current.resume=e})}),(0,p.jsx)("br",{}),x.touched.resume&&x.errors.resume?(0,p.jsx)("div",{style:{color:"#D32F2F"},children:x.errors.resume}):null,""!==x.values.resume?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("a",{href:x.values.resume,children:x.values.resume})]}):""]}),(0,p.jsxs)(a.default,{children:[(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Upload Button..."}),children:(0,p.jsx)(f,{name:"Address Proof",onChange:e=>(0,u.i)(e,"address_proof","kyc",x,r,!1),ref:e=>c.current.addressProof=e})}),(0,p.jsx)("br",{}),x.touched.address_proof&&x.errors.address_proof?(0,p.jsx)("div",{style:{color:"#D32F2F"},children:x.errors.address_proof}):null,""!==x.values.address_proof?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("a",{href:x.values.address_proof,children:x.values.address_proof})]}):""]})]}),(0,p.jsx)("br",{}),(0,p.jsx)(l.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading Submit Button..."}),children:(0,p.jsx)(h,{name:"Submit",isSubmitting:x.isSubmitting})}),(0,p.jsx)(d.A,{open:s,message:"File uploaded successfully!",sx:{left:"auto !important",right:"24px !important"}})]})}const y=l.memo(x)},7256:(e,s,r)=>{r.d(s,{i:()=>i});var l=r(9246);const i=async(e,s,r,i,o,a)=>{const n=e.target.files;if(!n||0===n.length)return void alert("No file selected");try{const t=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.size>5242880)return e.target.value=null,void alert(`File ${i.name} exceeds the 5MB limit.`);const o=await l.A.post("https://sameer-yadav.online/api/generate-presigned-url",{fileName:i.name,folderName:r,fileType:i.type}),{url:a}=o.data;await l.A.put(a,i,{headers:{"Content-Type":i.type}});const d=a.split("?")[0];t.push(d)}i.setValues((e=>({...e,[s]:a?t:t[0]}))),o(!0),e.target.value=null,setTimeout((()=>{o(!1)}),3e3)}catch(t){console.error("Error uploading file(s):",t),alert("Error uploading file(s). Please try again.")}}}}]);