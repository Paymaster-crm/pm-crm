"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[2935,2986],{2986:(e,o,s)=>{s.d(o,{getGeolocation:()=>t});const t=async e=>{try{const e=await new Promise(((e,o)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((o=>e(o)),(e=>o(e)),{timeout:3e4,maximumAge:0}):o(new Error("Geolocation is not supported by this browser."))}));return{latitude:e.coords.latitude,longitude:e.coords.longitude}}catch(o){let s;return s=1===o.code?"Location permission is denied. Please enable location access.":"User denied Geolocation"===o.message?"Location permission denied. Please enable location permission to log in.":o.message?o.message:"An unknown error occurred.",e({open:!0,message:s,severity:"error"}),console.error("Error fetching geolocation:",o),null}}},2935:(e,o,s)=>{s.d(o,{login:()=>n});var t=s(2986),a=s(3785);async function n(e,o,s,n){const r=await(0,t.getGeolocation)(n);try{const t=await a.A.post("/webauthn-login",{username:e,geolocation:r,userAgent:navigator.userAgent,credential:o});"Login successful"===t.data.message?s(t.data.user):n({open:!0,message:t.data.message,severity:"error"})}catch(i){n({open:!0,message:i.response.data.message,severity:"error"})}}}}]);