"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[8994],{8994:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var n=s(9950),a=s(3235),i=s(4414);const c=(0,a.A)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var r=s(9845),d=s(2917),l=s(3785),o=s(8394);const u=n.lazy((()=>s.e(6632).then(s.bind(s,6632))));function x(){const[e,t]=(0,n.useState)([]),[a,x]=(0,n.useState)({timeIn:!1,timeOut:!1}),[m,h]=(0,n.useState)(""),[j,g]=(0,n.useState)(""),[p,f]=(0,n.useState)(!0),y=new Date,[b,v]=(0,n.useState)(y.getMonth()),[A,S]=(0,n.useState)(y.getFullYear()),{setAlert:I}=(0,n.useContext)(r.C);async function w(){f(!0);try{var e;const s=await l.A.get(`/get-attendances/${b+1}/${A}`);t(s.data);const n=(new Date).setHours(0,0,0,0),a=null===(e=s.data)||void 0===e?void 0:e.find((e=>new Date(e.date).setHours(0,0,0,0)===n));a&&(h(a.timeIn),g(a.timeOut),x({timeIn:!!a.timeIn,timeOut:!!a.timeOut}))}catch(a){var s,n;console.log((null===(s=a.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||a.message)}finally{f(!1)}}(0,n.useEffect)((()=>{w()}),[b,A]);const C=async e=>{const{addAttendance:t}=await s.e(7939).then(s.bind(s,7939));t(e,I,w)};return(0,i.jsxs)(o.A,{container:!0,className:"dashboard-container mark-attendance",children:[(0,i.jsxs)(o.A,{size:{xs:12,md:5},children:[(0,i.jsx)("h2",{children:(0,i.jsx)("strong",{children:"My Attendances"})}),(0,i.jsx)("br",{}),!a.timeIn&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick:()=>C("timeIn"),className:"btn",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,i.jsx)(c,{sx:{fontSize:"20px",marginRight:"5px"}}),"Punch In"]}),(0,i.jsx)("br",{})]}),a.timeIn&&!a.timeOut&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("button",{onClick:()=>C("timeOut"),className:"btn",children:[(0,i.jsx)(c,{sx:{fontSize:"20px",marginRight:"5px"}}),"Punch Out"]}),(0,i.jsx)("br",{})]}),p?(0,i.jsx)(d.A,{variant:"text",width:100}):(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Time In:"})," ",m||"Not recorded yet"]}),p?(0,i.jsx)(d.A,{variant:"text",width:100}):(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Time Out:"})," ",j||"Not recorded yet"]})]}),(0,i.jsx)(o.A,{size:{xs:12,md:7},children:(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(u,{attendances:e,month:b,setMonth:v,year:A,setYear:S,currentDate:y})})})]})}const m=n.memo(x)}}]);