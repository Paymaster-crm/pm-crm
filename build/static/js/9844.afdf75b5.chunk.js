"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[9844],{9844:(s,e,r)=>{r.r(e),r.d(e,{default:()=>u});var a=r(9950),o=r(9246),t=r(3939),n=r(4019),d=r(1118),i=r(9714);const l=i.Ik({otp:i.Yj().required("OTP is required").length(6,"OTP must be exactly 6 digits"),password:i.Yj().required("Password is required"),confirmPassword:i.Yj().oneOf([i.KR("password"),null],"Passwords must match").required("Confirm Password is required")});var c=r(3557),m=r(4414);function p(s){(0,a.useEffect)((()=>{!async function(){try{const e=await o.A.post("https://sameer-yadav.online/api/send-forgot-password-otp",{username:s.username},{withCredentials:!0});alert(e.data.message)}catch(e){alert("Failed to send OTP")}}()}),[s.username]);const e=(0,t.Wx)({initialValues:{otp:"",password:"",confirmPassword:""},validationSchema:l,onSubmit:async e=>{try{const r=await o.A.put("https://sameer-yadav.online/api/update-password",{username:s.username,otp:e.otp,password:e.password},{withCredentials:!0});alert(r.data.message),"Password has been successfully reset"===r.data.message&&s.setForgotPassword(!1)}catch(r){r.response&&400===r.response.status?alert(r.response.data.message):alert("An unexpected error occurred. Please try again later.")}}});return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,m.jsx)("span",{style:{color:"#0060ae",fontWeight:800,fontSize:"14px"},children:"Enter OTP"}),(0,m.jsx)(n.o,{placeholder:"Enter OTP",value:e.values.otp,onChange:s=>e.setFieldValue("otp",s.value),mask:!0,integerOnly:!0,length:6}),e.touched.otp&&e.errors.otp&&(0,m.jsx)("small",{className:"p-error",children:e.errors.otp}),(0,m.jsx)(d._,{toggleMask:!0,id:"password",name:"password",placeholder:"New Password",value:e.values.password,onChange:e.handleChange,className:e.touched.password&&e.errors.password?"p-invalid":"",feedback:!1}),e.touched.password&&e.errors.password&&(0,m.jsx)("small",{className:"p-error",children:e.errors.password}),(0,m.jsx)(d._,{toggleMask:!0,id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",value:e.values.confirmPassword,onChange:e.handleChange,className:e.touched.confirmPassword&&e.errors.confirmPassword?"p-invalid":"",feedback:!1}),e.touched.confirmPassword&&e.errors.confirmPassword&&(0,m.jsx)("small",{className:"p-error",children:e.errors.confirmPassword}),(0,m.jsx)("br",{}),(0,m.jsx)(c.default,{isSubmitting:e.isSubmitting,name:"Confirm"})]})})}const u=a.memo(p)}}]);