"use strict";(self.webpackChunkpaymaster_crm=self.webpackChunkpaymaster_crm||[]).push([[4957],{6248:(e,n,s)=>{s.d(n,{V:()=>t});const t=(0,s(9950).createContext)()},1771:(e,n,s)=>{s.r(n),s.d(n,{default:()=>I});var t=s(9950),o=s(32),a=s(4489),i=s(3239),l=s(8429),r=s(3945),d=s(8060),c=s(5333),x=s(3212),p=s(4801),h=s(3274),b=s(4414);function u(e){const n=(0,l.Zp)();return(0,b.jsx)(d.A,{position:"fixed",sx:{width:{lg:e.showSidebar?"calc(100% - 60px)":"100%"},ml:{lg:"60px"},backgroundColor:"transparent",backgroundImage:"none",backdropFilter:"blur(6px) !important",boxShadow:"none"},children:(0,b.jsxs)(i.A,{children:[(0,b.jsx)(c.A,{"aria-label":"open drawer",edge:"start",onClick:()=>e.setMobileOpen(!e.mobileOpen),sx:{mr:2,display:{lg:"none"}},children:(0,b.jsx)(x.A,{})}),"/"!==window.location.pathname&&(0,b.jsx)(c.A,{"aria-label":"back",edge:"start",onClick:()=>n(-1),sx:{mr:1},children:(0,b.jsx)(p.A,{})}),(0,b.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:[(0,b.jsx)("div",{style:{flex:1},children:(0,b.jsx)("img",{src:"/assets/images/logo.webp",alt:"logo",onClick:()=>n("/"),style:{cursor:"pointer",width:"120px",height:"60px"}})}),(0,b.jsx)(h.A,{title:"Show/Hide Sidebar",children:(0,b.jsx)(c.A,{"aria-label":"sidebar",edge:"start",onClick:()=>e.setShowSidebar(!e.showSidebar),sx:{height:"50px",width:"50px",display:{sm:"none",lg:"block"}},children:(0,b.jsx)(x.A,{})})})]})]})})}const g=t.memo(u);var m=s(9694),j=s(685);const f=t.lazy((()=>s.e(7378).then(s.bind(s,7378)))),k={backgroundColor:"#111b21",backgroundImage:"url(/assets/images/sidebar-bg.webp)",backgroundAttachment:"fixed",backgroundPosition:"left 0 bottom 0 !important",backgroundSize:"250px !important",backgroundRepeat:"no-repeat",padding:"0 10px"},w={"& .MuiDrawer-paper":{boxSizing:"border-box",width:60}};function S(e){return(0,b.jsxs)(o.A,{component:"nav",sx:{width:{lg:60},flexShrink:{lg:0}},"aria-label":"mailbox folders",className:"sameer",children:[(0,b.jsx)(j.A,{PaperProps:{sx:k},variant:"temporary",open:e.mobileOpen,onOpen:()=>e.setMobileOpen(!e.mobileOpen),onClose:()=>e.setMobileOpen(!e.mobileOpen),ModalProps:{keepMounted:!0},sx:{...w,display:{xs:"block",lg:"none"}},children:(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(f,{})})}),(0,b.jsx)(m.Ay,{PaperProps:{sx:k},variant:"permanent",sx:{...w,display:{xs:"none",lg:"block"}},open:!0,children:(0,b.jsx)(f,{setRun:e.setRun})})]})}const y=t.memo(S);var v=s(3987),A=s(2436),C=s(6248),O=s(3422),M=s(3785);const P=(0,O.io)("http://localhost:9002",{transports:["websocket","polling"]});const z=function(e){const[n,s]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0);return(0,t.useEffect)((()=>(async function(){try{const e=await(0,M.A)("/get-notifications");s(e.data)}catch(e){console.error(e),s([])}finally{a(!1)}}(),P.on("notification",(t=>{t.department===e.department&&t.rank<=e.rank&&s([t,...n])})),()=>{P.disconnect()})),[]),{notifications:n,setNotifications:s,loading:o,setLoading:a}};const L=function(){const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{!async function(){try{const e=await M.A.get("/get-events");n(e.data)}catch(e){console.error(e)}}()}),[]),e};var R=s(5112);const V=t.lazy((()=>s.e(9321).then(s.bind(s,9321)))),F=t.lazy((()=>Promise.all([s.e(2993),s.e(4061)]).then(s.bind(s,4061)))),N=t.lazy((()=>s.e(3596).then(s.bind(s,3596)))),q=t.lazy((()=>Promise.all([s.e(3036),s.e(5292)]).then(s.bind(s,5292))));function B(e){const[n,s]=(0,t.useState)(!1),[d,c]=(0,t.useState)(0),[x,p]=(0,t.useState)(!1),{user:h}=(0,t.useContext)(A.R),{theme:u}=(0,t.useContext)(R.D),{notifications:m,setNotifications:j,loading:f,setLoading:k}=z(h),w=L(),S=(0,v.A)(h);return(0,b.jsx)(C.V.Provider,{value:{notifications:m,setNotifications:j,loading:f,setLoading:k},children:(0,b.jsxs)(r.u.Provider,{value:{tabValue:d,setTabValue:c},children:[(0,b.jsx)(q,{run:x,setRun:p}),(0,b.jsxs)(o.A,{sx:{display:"flex"},children:[(0,b.jsx)(a.Ay,{}),(0,b.jsx)(g,{mobileOpen:n,setMobileOpen:s,showSidebar:e.showSidebar,setShowSidebar:e.setShowSidebar}),e.showSidebar&&(0,b.jsx)(y,{mobileOpen:n,setMobileOpen:s,setRun:p}),(0,b.jsxs)(o.A,{component:"main",sx:{flexGrow:1,width:{lg:"calc(100% - 60px)"},backgroundColor:"light"===u?"#F9FAFB":"#111B21",height:"100vh",overflow:"scroll",padding:0===w.length?"20px":"50px 20px",paddingTop:0},children:[(0,b.jsx)(i.A,{}),(0,b.jsxs)(l.BV,{children:[S.map(((e,n)=>{let{path:s,element:o,allowedModules:a}=e;return(0,b.jsx)(l.qh,{path:s,element:0===a.length?o:(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(V,{allowedModules:a,children:o})})},n)})),(0,b.jsx)(l.qh,{path:"/not-authorized",element:(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(F,{})})}),(0,b.jsx)(l.qh,{path:"*",element:(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(F,{})})})]}),w.length>0&&(0,b.jsx)(t.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(N,{events:w})})]})]})]})})}const I=t.memo(B)}}]);